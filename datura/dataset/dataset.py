import random
import datetime
import bittensor as bt
from datasets import load_dataset
from bs4 import BeautifulSoup
import time
import requests
import html
from datura.services.subnet_18_api_wrapper import Subnet18
from datura.utils import call_openai
import json


class MockTwitterQuestionsDataset:
    def __init__(self):
        # Extended list of templates for questions

        self.question_templates = [
            "What's currently trending about {} on Twitter?",
            "Could you provide the latest updates on {}?",
            "What's the recent buzz around {} on Twitter?",
            "Any significant tweets about {} recently?",
            "What are the top tweets concerning {} at the moment?",
            "What's making headlines on Twitter about {}?",
            "What's the newest Twitter debate over {}?",
            "Any fresh news on {} from Twitter?",
            "What do the latest Twitter polls show about {}?",
            "How are Twitter users reacting to {} at this time?",
            "What are the latest tweets regarding {}?",
            "What's the dominant sentiment on Twitter towards {}?",
            "What's the active discussion on Twitter about {}?",
            "Which topics related to {} are hot on Twitter?",
            "Which {} hashtags are currently trending on Twitter?",
            "What's the current atmosphere about {} on Twitter?",
            "How is {} shaping trends for the year 2024?",
            "What's the freshest information concerning {}?",
            "Newest breakthroughs in the {} sector",
            "What are the latest {} trends?",
            "New developments in {}",
            "Progress of {} initiatives",
            "Any revolutionary discoveries in {}?",
            "What's the latest on {}?",
            "The most recent {} narratives",
            "Any new occurrences in {}?",
            "Recent achievements within the {} field",
            "Emerging trends in {} technology?",
            "The latest {} best practices",
            "Newest updates on {}",
            "Innovations in {}",
            "The current status of {}",
            "Latest insights in {}",
            "New data on {}",
            "Recent breakthroughs in {}?",
            "The ongoing dialogue about {}",
            "Latest changes in {} regulations?",
            "The impact of {} on global markets",
            "The latest innovations in {}",
            "Defining {} trends of this year",
            "The influence of {} advancements on the industry",
            "Current {} challenges",
            "Latest progress in the {} field",
            "Drivers of {} innovation",
            "Impacts of {} regulations on enterprises",
            "The role of {} in today's economy",
            "The influence of {} on consumer choices",
            "Latest reports on {} startups",
            "Changes in the {} landscape",
            "Contributions of {} to sustainability",
            "Predictions for {} in upcoming years",
            "Efforts of {} against climate change",
            "New technologies in {}",
            "Investment trends in {}",
            "Prospects for {}",
            "Frontiers of {} technology",
            "The impact of {} on society in 2024",
            "Rising stars among {} industry companies",
            "Ethical issues in the context of {}",
            "Strategies for tackling {} challenges through policy",
            "2024's economic outlook for {}",
            "The transformative effect of {} on society",
            "Long-term societal consequences of {}",
            "Debates currently focusing on {}",
            "Future outlooks for {}",
            "Today's innovative strategies in {}",
            "2024's daily life alterations due to {}",
            "Collaborative efforts in the {} sector",
            "Cultural relevance of {} in 2024",
            "Recent changes in {} policies",
            "New initiatives impacting {}",
            "Discoveries from recent {} research",
            "Discussions now happening about {}",
            "Top news headlines about {}",
            "Immediate updates on {}",
            "Success stories from the {} realm",
            "{} technology innovations",
            "Best practices in {} as of now",
            "Insights into {} just released",
            "Advanced techniques in {}",
            "Leading {} advancements",
            "Comprehensive insights into {}",
            "The latest comprehensive {} analysis",
            "Revolutionary {} technologies",
            "Debates currently active in {}",
            "How regulatory adjustments are influencing {}",
            "Global repercussions of {}",
            "Field of {} sees new innovations",
            "This year's notable {} trends",
            "Industry transformation by {}",
            "Challenges currently faced by {}",
            "Advances in {} technology",
            "Key drivers of progress in {}",
            "Effects of recent {} regulatory changes",
            "Economic roles played by {}",
            "Developments in {} driving trends",
            "Innovative {} startups shaking up the industry",
            "{} ecosystem as it stands",
            "Initiatives for sustainability in {}",
            "Forecasts for the future of {}",
            "Strategies against climate change in the {} sector",
            "Revolutionary technologies within {}",
            "Twitter's current favorites about {}",
            "Updates on {} you need to know",
            "Twitter's latest {} chatter",
            "Noteworthy {} tweets to check out",
            "Top current tweets on {}",
            "Twitter trends: what's hot in {}",
            "The latest {} discussions on Twitter",
            "Twitter's new updates on {}",
            "Twitter polls reveal new insights on {}",
            "Twitter's current mood on {}",
            "Fresh tweets about {} to see",
            "Twitter consensus on {} right now",
            "Twitter talks: the latest on {}",
            "Twitter's hot topics on {}",
            "Trending {} hashtags on Twitter",
            "Twitter's current vibe on {}",
            "2024: How {} is setting trends",
            "Breaking news on {}",
            "The {} sector's latest advancements",
            "New trends emerging in {}",
            "Updates and news on {}",
            "Project updates in the world of {}",
            "Breakthroughs in {} research",
            "Current happenings in {}",
            "{}: The latest stories",
            "Fresh off the press: {} developments",
            "Achievements in the {} arena",
            "What's brewing in {} tech?",
            "Best practices for {} right now",
            "The latest scoop on {}",
            "Innovative {} methods",
            "The state of {} today",
            "Insights and new angles on {}",
            "The latest word on {}",
            "Recent {} breakthroughs",
            "The conversation about {} today",
            "Regulatory news in {}",
            "Global market trends influenced by {}",
            "Breakthroughs shaking up {}",
            "2024's defining {} trends",
            "Industry-shaping developments in {}",
            "Today's biggest {} challenges",
            "{} evolution through tech",
            "What's pushing {} forward?",
            "Business impacts of {} regulations",
            "{} in the economic spotlight",
            "Consumer trends driven by {}",
            "Startups to watch in the {} space",
            "The changing face of {}",
            "{}'s green contributions",
            "Looking ahead: {} in the next years",
            "{}'s climate change fight",
            "The next big thing in {} tech",
            "Investment flows in {}",
            "What's next for {}?",
            "Frontline technologies in {}",
            "2024: The societal effects of {}",
            "Newcomers in the {} business scene",
            "Ethical questions raised by {}",
            "Policy solutions for {} issues",
            "2024's economic impact of {}",
            "Societal transformations courtesy of {}",
            "The future societal footprint of {}",
            "The latest debates on {}",
            "Projections for {}'s trajectory",
            "Current strategic innovations in {}",
            "Daily life in 2024: The {} effect",
            "Partnerships shaping the {} industry",
            "2024: {}'s cultural role",
            "Updates in {} policy",
            "Fresh initiatives in {}",
            "Latest {} research breakthroughs",
            "What's being said about {} now",
            "Headlines in {} news",
            "Urgent {} news flashes",
            "Lately, {}'s wins",
            "{} tech's latest marvels",
            "Now in {}: best practices",
            "Fresh {} insights",
            "New techniques shaking up {}",
            "At the forefront of {}",
            "Deep dives into {}",
            "Analytical updates on {}",
            "Shaping forces in {} tech",
            "Debates heating up in {}",
            "Changing regulations in {}",
            "How {} is going global",
            "The latest {} game-changers",
            "This year's {} highlights",
            "Revolutionizing the {} industry",
            "Facing down {} challenges",
            "Tech's leap forward in {}",
            "What's driving {}'s future",
            "Navigating {} regulations",
            "Economic insights into {}",
            "Trendsetting in {}",
            "Disruptors in the {} scene",
            "Today's {} landscape",
            "Green strides in {}",
            "What to expect from {}",
            "Climate action in {}",
            "Emerging {} tech frontiers",
            "Insider views on {}",
            "The latest dispatches on {}",
            "Twitter's {} watch",
            "Recent {} tweet highlights",
            "Twitter's {} trends to follow",
            "What Twitter's buzzing about in {}",
            "The newest {} debates on Twitter",
            "Twitter's latest {} updates",
            "What Twitter polls are saying about {}",
            "Twitter's take on {} today",
            "The latest {} tweetstorm",
            "Twitter's {} sentiment snapshot",
            "How Twitter's engaging with {}",
            "Twitter debates: the {} edition",
            "What's hashtagging in {} on Twitter",
            "Twitter's mood on {}",
            "Setting 2024 trends with {}",
            "What's fresh in the {} scene",
            "Progress reports on {}",
            "Spotlight on {} trends",
            "The {} news desk",
            "Project highlights in {}",
            "Discoveries shaking up {}",
            "What's happening in {} now",
            "The latest {} dispatches",
            "New developments in {}",
            "Tech breakthroughs in {}",
            "Leading {} practices today",
            "Update central for {}",
            "Innovating in {}",
            "The pulse of {}",
            "New {} perspectives",
            "Breaking news in {}",
            "Discussion points in {}",
            "Regulatory updates in {}",
            "Global {} impacts",
            "The {} innovation wave",
            "This year in {} trends",
            "Shaping the {} industry",
            "Today's {} hurdles",
            "Tech evolution in {}",
            "The drivers of {}",
            "Regulatory impacts on {}",
            "Economic angles of {}",
            "Consumer shifts by {}",
            "Startup scene in {}",
            "The {} transformation",
            "Sustainability by {}",
            "The future according to {}",
            "Climate strategies in {}",
            "Tech's edge in {}",
            "Investing in {} today",
            "Forecasting {}'s path",
            "Tech frontiers in {}",
            "2024: {}'s societal role",
            "Spotlight on {} startups",
            "Ethical {} debates",
            "Policy moves for {} challenges",
            "2024 and the {} economy",
            "The world according to {}",
            "Long-view effects of {} on society",
            "Current {} controversies",
            "Predicting {}'s next moves",
            "Today's strategic {} plays",
            "{}'s daily influence in 2024",
            "Collaborative moves in the {} sector",
            "{}'s 2024 cultural footprint",
            "Policy shifts in {}",
            "Initiative updates in {}",
            "Breakthroughs in {} research",
            "The {} conversation today",
            "Headline news in {}",
            "Breaking {} updates",
            "Recent {} triumphs",
            "{} tech's new frontiers",
            "Best practices in {} now",
            "The latest {} briefings",
            "Innovating {} practices",
            "Leading the {} charge",
            "Deep {} insights",
            "Analytical looks at {}",
            "Transformative {} technologies",
            "In the {} debate arena",
            "Regulatory shifts in {}",
            "Global market shifts by {}",
            "Innovative leaps in {}",
            "This year's {} watchlist",
            "Industry transformation via {}",
            "Navigating {}'s current challenges",
            "Advancing {} technology",
            "Progress drivers in {}",
            "Regulatory {} impacts",
            "Economic positioning of {}",
            "Trends propelled by {}?",
            "Disrupting startups in {}?",
            "Today's {} ecosystem?",
            "Sustainability efforts towards {}?",
            "Future projections for {}?",
            "Climate change counter-strategies in {}?",
            "Technologies pioneering in {}?",
            "Latest developments in {} are?",
            "Recent updates on the {} can you provide?",
            "Current Twitter buzz regarding {}?",
            "Fresh tweets about news on {}?",
            "Viral tweets recently about {}?",
            "Trending on Twitter currently about {}?",
            "Newest Twitter discussions concerning {}?",
            "Developments in {} on Twitter recently?",
            "Surveys on Twitter lately about {}?",
            "Twitter's response to {}?",
            "Newest tweets concerning {}?",
            "Prevailing Twitter opinions regarding {}?",
            "Engagement of the Twitter community with {}?",
            "Twitter conversations about {} being talked?",
            "Currently linked Twitter hashtags with {}?",
            "Latest sentiment regarding the {}?",
            "Innovating 2024 recipes in {}?",
            "Realm of {}'s newness?",
            "Advancements recently in {}",
            "Trends currently in {}?",
            "Discoveries latest in {}",
            "{} projects updates on",
            "Findings newest in {}",
            "Happenings in {}?",
            "News in {} latest",
            "Developments new in {}",
            "Milestones recent in {}",
            "Technology in {} latest",
            "Best practices currently for {}",
            "Updates latest in {}",
            "Methods innovative in {}",
            "State current of {}",
            "Perspectives fresh in {}",
            "On the latest of {}",
            "Innovations new in {}",
            "Themes current in {}",
            "Policy changes on {} latest?",
            "Global markets impact of {}?",
            "Breakthroughs latest in {}?",
            "This year's influencing trends the {}?",
            "Sector shaping advancements in {}?",
            "Today's key challenges in the {}?",
            "Technology via {} evolution?",
            "Innovation drivers principal of {}?",
            "Sector's {} regulations impact?",
            "Economy today's role of {}?",
            "Consumer behavior's {} influence?",
            "Startups in {} new developments?",
            "Scene in {} latest?",
            "Sustainability promoting role of {}?",
            "Upcoming years predictions for {}?",
            "Climate change combating approach of {}?",
            "Within {} emerging technologies?",
            "Investment trends in {}?",
            "Prospects future for {}?",
            "Technology in {} cutting-edge advancements?",
            "Society in 2024's {} influence?",
            "Industry in {} rising startups?",
            "Around {} ethical considerations?",
            "{} challenges policy responses?",
            "2024 in {} economic impact?",
            "Global landscape reshaping role of {}?",
            "Society on {} long-term impacts?",
            "Surrounding {} ongoing controversies?",
            "For {} predictions?",
            "Today within {} innovative strategies?",
            "2024's daily {} impact?",
            "Industry in {} recent partnerships?",
            "Pop culture in 2024's {} influence?",
            "Regarding {} latest government regulations?",
            "{} projects on the newest updates",
            "{} in recent findings",
            "In {} current talk?",
            "News latest in {}",
            "About {} breaking news",
            "In {} recent achievements",
            "Technology in {} what's new?",
            "In {} current best practices",
            "Data latest in {}",
            "Methods in {} innovations",
            "Of {} the vanguard",
            "Into {} insights",
            "On {} latest reports",
            "Defining {} technologies",
            "In {} ongoing discussions",
            "Affecting {} policy changes?",
            "Global markets on {} influence?",
            "In {} new breakthroughs?",
            "This year in {} defining movements?",
            "Sector revolutionizing how {} is?",
            "In {} present challenges?",
            "With technology {}'s development?",
            "Innovation of {} catalysts?",
            "Regulations of {} consequences?",
            "Economic landscape in {}'s status?",
            "By {} driven trends?",
            "Disrupting startups {}?",
            "Landscape of today's {}?",
            "Sustainability towards efforts in {}?",
            "For {} projections?",
            "Against climate change in {} strategies?",
            "The recent news tell me about the {}",
            "Twitter sentiment current on {}?",
            "Breaking news tweets any about {}?",
            "Viral tweets the latest about {}?",
            "Trending on Twitter what's about {}?",
            "Discussion latest on Twitter about {}?",
            "On Twitter any new developments in {}?",
            "Twitter polls recent about {}?",
            "Reacting to {} how are Twitter users?",
            "Regarding {} recent tweets?",
            "Top opinions on Twitter about {}?",
            "Responding to {} how is the Twitter community?",
            "Saying about {} what are Twitter users?",
            "Currently with {} associated Twitter hashtags?",
            "The sentiment current about the {}?",
            "Recipes in 2024 spicing up how are {}?",
            "Developments recent in {}?",
            "Advancements in {} latest",
            "Trends in {} current",
            "Discoveries recent in {}",
            "Efforts on {} updates",
            "Findings new in {}",
            "Events current in {}",
            "News in {} latest",
            "News breaking in {}",
            "Achievements recent in {}",
            "Technology on {} updates",
            "Best practices current in {}",
            "News latest in {}",
            "Methods new in {}",
            "State of {} current",
            "Findings latest in {}",
            "On {} updates",
            "Innovations recent in {}",
            "Trends current in {}",
            "Policy changes in {} what's the latest?",
            "Global markets the {} impacting how?",
            "Breakthroughs newest in {}?",
            "This year the {} defining what trends?",
            "Shaping the industry how are advancements in {}?",
            "Facing today the {} what are the main challenges?",
            "With technology evolving how is the {}?",
            "Driving {} innovation what are the key factors?",
            "Affecting the market how are {} regulations?",
            "In the modern economy what role does {} play?",
            "Influencing consumer behavior how is {}?",
            "Startups in {} what are the recent developments?",
            "World of {} what's new in the?",
            "Contributing to sustainability how is {}?",
            "Predictions for {} in the coming years what are the latest?",
            "Addressing climate change how is the {}?",
            "Emerging in {} what technologies?",
            "Investment trends in {} what are the current?",
            "Outlook for {} what's the future?",
            "Technology advancements in {} what are the latest?",
            "Impacting society in 2024 how is {}?",
            "Industry in the {} what are the most promising startups?",
            "Surrounding {} what are the ethical considerations?",
            "Challenges in {} how are policymakers addressing?",
            "Implications of {} in 2024 what are the economic?",
            "Transforming the global landscape how is {}?",
            "Effects of {} on humanity what are the potential long-term?",
            "Surrounding {} what are the latest controversies?",
            "Predicting the future of {} how are experts?",
            "Solutions in {} today what are the most innovative?",
            "Affecting daily lives in 2024 how is {}?",
            "Collaborations in the {} industry what are the latest?",
            "Influencing pop culture in 2024 how is {}?",
            "Related to {} what are the latest government initiatives?",
        ]

        self.topics = [
            "green power",
            "equity markets",
            "AI advancements",
            "style trends",
            "astronomy",
            "global warming",
            "healthful eating",
            "nutrition plans",
            "world diplomacy",
            "cinematography",
            "pop culture",
            "innovation",
            "latest gadgets",
            "health science",
            "EV technology",
            "coding practices",
            "scholarship",
            "e-learning",
            "eco farming",
            "financial growth",
            "behavioral science",
            "emotional well-being",
            "information security",
            "online privacy",
            "building designs",
            "creative arts",
            "voyage",
            "holiday destinations",
            "United States",
            "high tech",
            "new ventures",
            "business innovation",
            "current affairs",
            "international issues",
            "melodies",
            "concerts",
            "motion pictures",
            "theatre",
            "athletics",
            "physical health",
            "video games",
            "competitive gaming",
            "well-being",
            "video streaming",
            "crypto assets",
            "distributed ledger technology",
            "environmental sustainability",
            "computational learning",
            "US politics",
            "political elections",
            "economic finance",
            "world governance",
            "international negotiations",
            "athletic games",
            "competitive events",
            "online communities",
            "web communication",
            "fine arts",
            "societal culture",
            "public health",
            "biomedical",
            "business startups",
            "AI by Nvidia",
            "Eastern Europe politics",
            "world strategy",
            "tech advancements by Google",
            "software engineering",
            "scientific research",
            "historical studies",
            "sociocultural",
            "crypto trading",
            "blockchain innovations",
            "film production",
            "e-health",
            "adventures",
            "cafe culture",
            "way of life",
            "economic trends",
            "market analysis",
            "web culture",
            "trending online",
            "independent gaming",
            "game crafting",
            "game creation",
            "digital innovation",
            "Microsoft technologies",
            "crypto economics",
            "physical exercise tech",
            "automation technology",
            "film production trends",
            "tech breakthroughs",
            "venture funding",
            "world politics",
            "creative industry",
            "film direction",
            "competitive gaming",
            "lifestyle design",
            "game programming",
            "streaming originals",
            "eco innovations",
            "analytics",
            "exploration",
            "national news",
            "capital investment",
            "electoral processes",
            "global happenings",
            "creative content",
            "art shows",
            "space missions",
            "foreign policy",
            "web solutions",
            "cloud computing services",
            "open source projects",
            "AI art",
            "digital creativity",
            "universe exploration",
            "eco-friendly energy",
            "digital artistry",
            "vehicle tech",
            "eco practices",
            "drones",
            "fintech innovations",
            "crypto exchanges",
            "leisure activities",
            "world financial system",
            "internet phenomena",
            "innovative gaming",
            "enterprise software",
            "ledger tech",
            "AI applications",
            "smart devices",
            "digital communities",
            "economic strategies",
            "farm tech",
            "creative tech",
            "VR experiences",
            "housing solutions",
            "awareness on mental health",
            "mass transit",
            "online shopping",
            "energy shift",
            "self-driving tech",
            "online data protection",
            "trade deals",
            "city planning",
            "quantum tech",
            "migration trends",
            "funding ventures",
            "astral travel",
            "tech giants",
            "quantum theories",
            "data protection",
            "AR experiences",
            "urban innovation",
            "genetic engineering",
            "connected driving",
            "next-gen networks",
            "genomic editing",
            "intelligent homes",
            "ledger control",
            "web identity",
            "ethical fashion",
            "recycling economy",
            "CO2 reduction methods",
            "agricultural innovation",
            "health teleconsultation",
            "digital learning platforms",
            "work from anywhere",
            "traveling professionals",
            "alternative proteins",
            "sky farming",
            "additive manufacturing",
            "medical robotics",
            "computing at the edge",
            "virtual replicas",
            "touch technology",
            "neural interfaces",
            "digital assets",
            "asteroid surveillance",
            "quantum encryption",
            "adaptive materials",
            "renewable hydrogen",
            "oceanic power",
            "emissions trading",
            "soil restoration",
            "targeted farming",
            "custom nutrition",
            "wellness applications",
            "online gatherings",
            "AR in retail",
            "aerial shipping",
            "automated logistics",
            "rapid transit solutions",
            "virtual art exhibitions",
            "digital personas",
            "activism via social media",
            "educational gamification",
            "alternative plastics",
            "marine debris removal",
            "intelligent recycling",
            "negative emission building",
            "urban gardening",
            "exploring localities",
            "crafting at home",
            "exercise at home",
            "economical voyaging",
            "street cuisine",
            "community markets",
            "volunteering",
            "city green spaces",
            "bicycle commuting",
            "animal care",
            "houseplants",
            "DIY cooking",
            "second-hand shopping",
            "audio entertainment",
            "digital reading",
            "app development",
            "vlog creation",
            "web-based learning",
            "acquiring new languages",
            "beginner programming",
            "mindfulness practices",
            "emotional wellness",
            "stress reduction",
            "organizing time",
            "managing finances",
            "economical saving",
            "fundamentals of investing",
            "simplified cooking",
            "meal prep",
            "food storage",
            "living sustainably",
            "green habits",
            "waste reduction",
            "living with less",
            "creative reuse",
            "craft projects",
            "photo capturing",
            "video recording with smartphones",
            "online marketing strategies",
            "content creation advice",
            "independent work",
            "tools for remote work",
            "web conferencing",
            "safeguarding online",
            "protecting privacy",
            "internet safety practices",
            "digital finance management",
            "virtual experience",
            "environmental changes",
            "AI evolution",
            "distributed networks",
            "clean power initiatives",
            "space ventures",
            "network security",
            "health innovations",
            "distributed work",
            "digital commerce",
            "quantum advancements",
            "next-gen connectivity",
            "reality enhancement",
            "urban ecosystems",
            "genomic innovations",
            "driverless mobility",
            "algorithmic learning",
            "confidentiality in data",
            "financial technology",
            "freelance economy",
            "connected ecosystems",
            "molecular engineering",
            "alternative energy sources",
            "online trend analysis",
            "web marketing",
            "life extension",
            "agricultural tech",
            "learning tech",
            "personal wearables",
            "interactive entertainment",
            "algorithmic analysis",
            "cloud infrastructure",
            "psychological health",
            "economic management",
            "waste-free living",
            "vegetarian diets",
            "health consultations online",
            "creative media production",
            "compact urban transport",
            "CO2 sequestration",
            "synthetic meat production",
            "biofabrication",
            "hydrogen fuel generation",
            "offshore wind energy",
            "packaging solutions",
            "energy distribution networks",
            "travel restoration",
            "expat permits",
            "brain-sensing wearables",
            "customized learning applications",
            "transparent supply chains",
            "automated legal agreements",
            "peer-to-peer networks",
            "digital land ownership",
            "exercise motivation apps",
            "computer-generated music",
            "healthcare automation",
            "sustainable fashion",
            "protein alternatives",
            "solar power from space",
            "infrastructure simulation",
            "public digital art",
            "nanoscale sensors",
            "emotional AI",
            "building automation",
            "identity verification on blockchain",
            "renewable energy",
            "stock market",
            "artificial intelligence",
            "fashion",
            "space exploration",
            "climate change",
            "nutrition",
            "diet",
            "international politics",
            "movies",
            "entertainment",
            "technology",
            "gadgets",
            "medical research",
            "electric vehicles",
            "software development",
            "education",
            "online learning",
            "sustainable agriculture",
            "economic recovery",
            "psychology",
            "mental health",
            "cybersecurity",
            "data privacy",
            "architecture",
            "design",
            "travel",
            "tourism",
            "USA",
            "tech",
            "startup",
            "entrepreneurship",
            "world issues",
            "global issues",
            "music",
            "live performances",
            "film",
            "cinema",
            "sport",
            "fitness",
            "gaming",
            "esports",
            "health",
            "wellness",
            "streaming services",
            "cryptocurrency",
            "blockchain",
            "climate sustainability",
            "machine learning",
            "American politics",
            "elections",
            "finance",
            "global politics",
            "diplomacy",
            "Olympics",
            "sports competitions",
            "social media",
            "digital communication",
            "art",
            "culture",
            "healthcare",
            "medical",
            "entrepreneurship",
            "Nvidia AI",
            "Ukraine",
            "geopolitics",
            "Google digital innovation",
            "programming",
            "software development",
            "science",
            "research",
            "history",
            "cultural",
            "cryptocurrency",
            "blockchain technology",
            "movies",
            "digital health",
            "travel",
            "coffee culture",
            "lifestyle",
            "economy",
            "financial markets",
            "internet culture",
            "social media trends",
            "indie games",
            "game design",
            "video game development",
            "technology",
            ".NET framework",
            "programming",
            "Bitcoin",
            "digital currency",
            "fitness",
            "health technology",
            "robotics technology",
            "automation",
            "cinema",
            "movie industry",
            "tech innovation",
            "gadgets",
            "venture capital",
            "geopolitics",
            "artists",
            "directors",
            "competitions",
            "health and wellness",
            "designers",
            "game development",
            "original series",
            "green technology",
            "data science",
            "adventure",
            "US news",
            "investing",
            "voting",
            "world events",
            "content creation",
            "exhibitions",
            "SpaceX",
            "international relations",
            "digital services",
            "cloud services",
            "open-source",
            "AI-generated imagery",
            "digital art",
            "cosmos",
            "clean energy",
            "new media art",
            "automotive technology",
            "sustainable practices",
            "unmanned aerial vehicles",
            "digital finance",
            "digital currency trading",
            "relaxation",
            "global economy",
            "viral content",
            "creative gaming",
            "Microsoft",
            "blockchain technology",
            "machine learning applications",
            "Internet of Things",
            "crypto community",
            "fiscal policy",
            "agricultural technology",
            "innovation",
            "virtual reality",
            "affordable housing",
            "mental health awareness",
            "public transportation",
            "e-commerce",
            "renewable energy transition",
            "autonomous vehicles",
            "data privacy",
            "international trade agreements",
            "urban development",
            "quantum computing",
            "global migration patterns",
            "venture capital",
            "space tourism",
            "google",
            "amazon",
            "microsoft",
            "twitter",
            "quantum mechanics",
            "cybersecurity",
            "augmented reality",
            "smart cities",
            "biotechnology",
            "autonomous driving",
            "5G networks",
            "gene editing",
            "smart homes",
            "blockchain governance",
            "digital identity",
            "sustainable fashion",
            "circular economy",
            "carbon capture technology",
            "precision agriculture",
            "telemedicine",
            "online education platforms",
            "remote work",
            "digital nomads",
            "plant-based meat alternatives",
            "vertical farming",
            "3D printing",
            "robotics in healthcare",
            "edge computing",
            "digital twins",
            "haptic technology",
            "brain-computer interfaces",
            "decentralized finance (DeFi)",
            "non-fungible tokens (NFTs)",
            "space mining",
            "asteroid detection",
            "quantum cryptography",
            "smart materials",
            "green hydrogen",
            "tidal energy",
            "carbon offsetting",
            "regenerative agriculture",
            "precision medicine",
            "personalized nutrition",
            "mental health apps",
            "virtual events",
            "augmented reality shopping",
            "drone delivery",
            "self-driving trucks",
            "hyperloop transportation",
            "digital art galleries",
            "virtual influencers",
            "social media activism",
            "gamification in education",
            "bioplastics",
            "ocean cleanup technology",
            "smart waste management",
            "carbon-negative construction",
            "home gardening",
            "local tourism",
            "DIY crafts",
            "home workouts",
            "budget travel",
            "street food",
            "local markets",
            "community service",
            "public parks",
            "urban cycling",
            "pet care",
            "indoor plants",
            "homemade recipes",
            "thrifting",
            "podcasts",
            "audiobooks",
            "e-books",
            "mobile apps",
            "video blogging",
            "online courses",
            "language learning",
            "coding for beginners",
            "yoga",
            "meditation",
            "mental wellness",
            "stress management",
            "time management",
            "personal finance",
            "saving tips",
            "investment basics",
            "easy cooking",
            "meal planning",
            "food preservation",
            "sustainable living",
            "eco-friendly habits",
            "recycling tips",
            "zero waste lifestyle",
            "minimalist living",
            "upcycling projects",
            "handicrafts",
            "digital photography",
            "smartphone videography",
            "social media marketing",
            "blogging tips",
            "freelancing",
            "remote work tools",
            "virtual meetings",
            "online security",
            "privacy protection",
            "cyber hygiene",
            "Ukraine",
            "Brazil",
            "India",
            "China",
            "Germany",
            "France",
            "Italy",
            "Japan",
            "Canada",
            "Australia",
            "South Korea",
            "Russia",
            "Spain",
            "Mexico",
            "Indonesia",
            "Turkey",
            "United Kingdom",
            "Saudi Arabia",
            "Netherlands",
            "Switzerland",
            "Sweden",
            "Belgium",
            "Poland",
            "Argentina",
            "Norway",
            "Iran",
            "Thailand",
            "South Africa",
            "Egypt",
            "Pakistan",
            "Bangladesh",
            "Vietnam",
            "Philippines",
            "Iraq",
            "Afghanistan",
            "Nigeria",
            "Ethiopia",
            "Morocco",
            "Ghana",
            "Kenya",
            "Uganda",
            "Zimbabwe",
            "Chile",
            "Colombia",
            "Peru",
            "Venezuela",
            "Cuba",
            "Malaysia",
            "Singapore",
            "Kazakhstan",
            "Uzbekistan",
            "Syria",
            "Jordan",
            "Lebanon",
            "Israel",
            "Denmark",
            "Finland",
            "Ireland",
            "cryptocurrency",
            "virtual reality",
            "climate change",
            "artificial intelligence",
            "blockchain",
            "sustainable energy",
            "electric vehicles",
            "space exploration",
            "cybersecurity",
            "digital health",
            "remote work",
            "e-commerce",
            "quantum computing",
            "5G technology",
            "augmented reality",
            "smart cities",
            "gene editing",
            "autonomous driving",
            "machine learning",
            "data privacy",
            "fintech",
            "gig economy",
            "internet of things",
            "nanotechnology",
            "renewable energy",
            "social media trends",
            "digital marketing",
            "biohacking",
            "agritech",
            "edtech",
            "wearable tech",
            "gaming",
            "deep learning",
            "cloud computing",
            "mental health",
            "personal finance",
            "zero waste lifestyle",
            "plant-based diets",
            "telemedicine",
            "content creation",
            "micro-mobility solutions",
            "carbon capture and storage",
            "lab-grown meat",
            "precision fermentation",
            "green hydrogen production",
            "floating wind farms",
            "eco-friendly packaging materials",
            "smart grid technology",
            "regenerative tourism",
            "digital nomad visas",
            "neurotech wearables",
            "AI-powered personalized education",
            "blockchain for supply chain transparency",
            "smart contract dispute resolution",
            "decentralized social networks",
            "virtual real estate",
            "gamified fitness apps",
            "AI-generated music",
            "robotic process automation in healthcare",
            "circular fashion",
            "insect-based protein",
            "space-based solar power",
            "digital twin infrastructure",
            "augmented reality public art",
            "smart dust sensors",
            "emotion recognition AI",
            "autonomous construction robots",
            "blockchain-based identity management",
        ]

    def generate_question(self):
        # Randomly select a question template and a topic
        template = random.choice(self.question_templates)
        topic = random.choice(self.topics)

        # Generate a question
        return template.format(topic)

    def next(self):
        # Return a generated question
        return self.generate_question()


class StackOverflowDataset:
    def __init__(self):
        self.questions = []

    def get_stack_questions(self):
        url = "https://api.stackexchange.com/2.3/questions"

        params = {
            "order": "desc",
            "sort": "votes",  # Sorting by votes means that it's likely that the same questions will be fetched again
            "site": "stackoverflow",
            "pagesize": 100,  # Fetch 100 questions per API call
            # Max 25 questions allowed on free API
            "page": random.randint(1, 25),
        }

        # Fetch questions
        response = requests.get(url, params=params)
        response.raise_for_status()

        # Parse response
        questions = response.json()["items"]

        # Filter questions by minimum upvotes
        min_upvotes = 10
        filtered_questions = [
            q for q in questions if q["score"] >= min_upvotes]
        # Shuffle the questions
        random.shuffle(filtered_questions)

        # Add the questions to the list of questions
        self.questions.extend(filtered_questions)
        return

    def get_stack_question(self) -> dict:
        # If the list of questions is empty, fetch more questions
        if not self.questions:
            self.get_stack_questions()
        question = self.questions.pop()
        return question["title"]

    def next(self):
        bt.logging.debug("Retrieving data from prompting.dataset...")
        t0 = time.time()
        question = self.get_stack_question()
        fetch_time = time.time() - t0
        return html.unescape(question)


class MockDiscordQuestionsDataset:
    def __init__(self):
        self.question_templates = [
            "What are the recent announcements in #alpha",  # in:alpha announcements
            "What are the recent announcements in #announcements",  # in:announcements
            "Tell me the recent news about bittensor",  # bittensor news
            "What @professor is asking in subnet 22",  # from:professor in:22
            "What is latest release version of Bittensor?",  # bittensor release
            "What are the Hyper parameters of subnet 22?",  # hyper parameters in:22
            "What people are talking about TAO wallet?",  # TAO wallet
            "Axon configurations in translation subnet",  # axon config in:translation
            # bittensor server update
            "What are the recent discussions about the new bittensor server update?",
            # axon image classification
            "How do I configure my axon for the image classification subnet?",
            "What are people saying about the new Datura tokenomics proposal?",  # datura tokenomics
            "Has there been any news on the upcoming Bittensor hackathon?",  # bittensor hackathon
            # system requirements chi model
            "What are the system requirements for running a full datura node?",
            "How can I stake my TAO tokens and earn rewards?",  # stake tao tokens
            # performance benchmarks days_before:3d
            "What are the latest performance benchmarks for different subnet configurations?",
            # bittensor integrations
            "Are there any updates on the integration with other AI platforms?",
            # contribute bittensor codebase
            "What's the best way to contribute to the Bittensor codebase as a developer?",
            "What people discussed today?",  # days_before:1d
            "How can we deploy a subnet",  # subnet deployment or deploy subnet
            "Test network",  # test network
            "Which subnets has implementation of Youtube Search tool?",  # subnet youtube search
            "Which subnets can interact with Google",  # subnet google
            "Is there any subnet that generates images?",  # subnet image generation
            "When testnet will be fixed?",  # testnet issue
            "Whats the best image generation tool on bittensor?",  # image generation tool
        ]

    def generate_question(self):
        template = random.choice(self.question_templates)
        return template

    def next(self):
        return self.generate_question()


class MockBittensiorQuestionsDataset:
    def __init__(self):
        self.question_templates = [
            "How to install Bittensor?",
            "How to install Bittensor on M2?",
            "How can i use Bittensor CLI?",
            "What is purpose of subnet 22?",
            "How to create a wallet with bittensor CLI?",
            "How emissions works on Bittensor?",
            "What is Yuma Consensus, and how it works",
            "How the Senate operates?",
            "List basic subnet tutorials",
            "What are subtensor node requirements?",
        ]

    def generate_question(self):
        template = random.choice(self.question_templates)
        return template

    def next(self):
        return self.generate_question()


class QuestionsDataset:
    def __init__(self, wallet) -> None:
        self.wallet = wallet
        self.datasets = [
            MockTwitterQuestionsDataset(),
            MockTwitterQuestionsDataset(),
            MockTwitterQuestionsDataset(),
            MockTwitterQuestionsDataset(),
            StackOverflowDataset(),
        ]

    async def generate_new_question(self, selected_tools):
        try:
            response = await self.generate_new_question_with_subnet_18()
            return response
        except Exception as e:
            bt.logging.error(
                f"Cannot generate question with subnet 18, switching to open ai: {e}")
            response = await self.generate_new_question_with_openai(selected_tools)
            return response

    async def generate_new_question_with_subnet_18(self):
        # Select a random dataset and get the next question
        original_question = self.next()

        # Extract the topic from the original question
        topic = (
            original_question.split("{}")[0]
            if "{}" in original_question
            else original_question
        )

        # Prepare a simpler prompt for OpenAI
        prompt = f"Create a simple and straightforward question about '{topic}' that is 5 to 14 words long."
        bt.logging.warning(f"Topic: {topic}")

        sn18 = Subnet18(wallet=self.wallet)
        try:
            # Make the call to Subnet 18 query call with the new question
            new_question = await sn18.query(
                messages=[{"role": "system", "content": prompt}],
                temperature=0.3,  # Lower temperature for less creativity and more straightforward output
                model="gpt-3.5-turbo-0125",
                miner_uid=sn18.get_random_miner_uid(),
            )

            # Check if new_question is None or an empty string
            if not new_question:
                return original_question
            return new_question.strip()
        except Exception as e:
            print(f"Failed to call Subnet 18: {e}")
            return original_question

    async def generate_new_question_with_openai(self, selected_tools):
        # Select a random dataset and get the next question
        original_question = self.next()

        # Extract the topic from the original question
        topic = (
            original_question.split("{}")[0]
            if "{}" in original_question
            else original_question
        )

        # Convert the list of tools into a string to include in the prompt
        # INFO: Not used
        # tools_str = ", ".join(selected_tools)

        # Prepare a simpler prompt for OpenAI
        prompt = f"Create a simple and straightforward question about '{topic}' that is 5 to 14 words long."
        bt.logging.warning(f"Topic: {topic}")

        try:
            # Make the call to OpenAI with the new question
            new_question = await call_openai(
                messages=[{"role": "system", "content": prompt}],
                temperature=0.3,  # Lower temperature for less creativity and more straightforward output
                model="gpt-3.5-turbo-0125",
                seed=None,
            )

            # Check if new_question is None or an empty string
            if not new_question:
                return original_question
            return new_question.strip()
        except Exception as e:
            print(f"Failed to call OpenAI: {e}")
            return original_question

    def next(self):
        random_dataset = random.choice(self.datasets)
        if isinstance(random_dataset, StackOverflowDataset):
            try:
                return random_dataset.next()
            except Exception as e:
                print(f"Error with StackOverflowDataset: {e}")
                fallback_dataset = MockTwitterQuestionsDataset()
                return fallback_dataset.next()
        else:
            return random_dataset.next()


if __name__ == "__main__":
    # Example usage
    # twitter_questions_dataset = MockTwitterQuestionsDataset()
    # for _ in range(100):
    # print(twitter_questions_dataset.next())

    stack_overflow_dataset = StackOverflowDataset()

    for _ in range(100):
        question = stack_overflow_dataset.next()
        print(question)
